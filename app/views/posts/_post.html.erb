<div class="post">
  <div class="post_main_block">
    <div class="title"><%= @post.title %></div>
    <div class="title_border"></div>
    <div class="body"><%= @post.body %></div>
    <% if can_current_user_change? @post %>
      <%= link_to '', edit_user_post_path(user_id: @user.id, id: @post.id), class: 'edit_post_img'%>
      <%= link_to '', user_post_path(user_id: @user.id, id: @post.id), method: "delete", class: 'delete_post_img' %>
    <% end %>
  </div>


  <div class="post_comments">
    <% @post.comments.each do |comment| %>
      <div class="post_comment">
        <div class="comment_left_block">
          <div class="post_comment_avatar">
            <%= image_tag comment.user.avatar %>
          </div>
        </div>
        <div class="comment_right_block">
          <div>
            <%= link_to comment.user.name, user_path(comment.user) %>
          </div>
          <div>
            <%= comment.body %></div>
        </div>
        <div class="created_at">
          <%= comment.created_at.localtime.strftime("%H:%M:%S")
          %>
        </div>
      </div>
      <div class="edit_comment_text">
        <% if can_current_user_change? comment %>
          <%= link_to 'Редактировать комментарий', edit_comment_path(post) %>
        <% end %>
      </div>
    <% end %>
  </div>

  <% if current_user %>
    <div class="add_comment">
      <%= form_for [@post.comments.new], html: {class: 'pure-form'} do |form| %>
        <div class="field">
          <%= form.text_area :body, placeholder: 'Текст комментария...' %>
          <%= form.hidden_field :commentable_type, value: 'Post' %>
          <%= form.hidden_field :commentable_id, value: @post.id %>
        </div>

        <div class="actions">
          <%= form.submit class: 'pure-button pure-button-primary' %>
        </div>
      <% end %>
    </div>
  <% end %>
</div>